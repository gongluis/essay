<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>单元测试Monkey - Luis Docs</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">Luis Docs</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="..">介绍</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">JAVA <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../basicDataType/">基础数据类型</a>
</li>
                                    
<li >
    <a href="../algorithm/">算法</a>
</li>
                                    
<li >
    <a href="../garbage/">垃圾回收机制</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">kotuis <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../kotuis/">学习笔记</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Android <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../fourcomponent/">四大组件</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">设计模式</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../designpattern/singleInstance/">单例</a>
</li>
            
<li >
    <a href="../designpattern/factory/">工厂</a>
</li>
            
<li >
    <a href="../designpattern/builder/">Builder</a>
</li>
            
<li >
    <a href="../designpattern/observer/">观察者</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">自定义控件</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../customView/customCombinationView/">自定义组合控件</a>
</li>
            
<li >
    <a href="../customView/customView/">自定义View</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">APP架构</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../constructure/mvc/">MVC</a>
</li>
            
<li >
    <a href="../constructure/font_updown.md">MVP</a>
</li>
            
<li >
    <a href="../constructure/font_updown.md">MVvm</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../threadPool/">线程池</a>
</li>
                                    
<li >
    <a href="../touchEvent/">事件分发</a>
</li>
                                    
<li >
    <a href="../handler/">Handler原理</a>
</li>
                                    
<li >
    <a href="../sdkversion/">Android版本对应SDK版本</a>
</li>
                                    
<li >
    <a href="../better/">APP整体优化</a>
</li>
                                    
<li >
    <a href="../sdk/">sdk开发笔记</a>
</li>
                                    
<li >
    <a href="../adaption.md">屏幕适配</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">一些小的点</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../context/">ConText</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">一些常见功能的思考</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../login.md">登录</a>
</li>
    </ul>
  </li>
                                    
<li class="active">
    <a href="./">单元测试Monkey</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../context/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="disabled">
                                <a rel="prev" >
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#junit4">单元测试JUNIT4</a></li>
            <li><a href="#local-unit-test">本地单元测试Local Unit Test</a></li>
            <li><a href="#instrumented-unit-test">设备单元测试Instrumented Unit Test</a></li>
        <li class="main "><a href="#monkey">压力测试Monkey</a></li>
            <li><a href="#monkey_1">monkey停止条件</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h3 id="junit4">单元测试JUNIT4</h3>
<p>每个项目都是由成百上千个函数组成，每编写完一个函数都要对这个函数的方方面面进行测试，这样的测试称之为单元测试。</p>
<h4 id="local-unit-test">本地单元测试Local Unit Test</h4>
<p>这种测试运行在本地开发环境的java虚拟机上，不需要连接安卓设备或者虚拟器，无法获得安卓相关api,只能使用java相关api<br />
测试类代码编写也很简单，主要通过一些注解和断言来实现。  </p>
<h5 id="junit4_1">Junit4 注解</h5>
<pre><code>@Before标注setup方法，每个单元测试用例方法调用之前都会调用
@After标注teardown方法，每个单元测试用例方法调用之后都会调用
@Test标注的每个方法都是一个测试用例
@BeforeClass标注的静态方法，在当前测试类所有用例方法执行之前执行
@AfterClass标注的静态方法，在当前测试类所有用例方法执行之后执行
@Test(timeout=)为测试用例指定超时时间
</code></pre>

<h5 id="_1">断言</h5>
<pre><code>Junit提供了一系列断言来判断是pass还是fail

assertTrue(condition)：condition为真pass，否则fail
assertFalse(condition)：condition为假pass，否则fail
fail()：直接fail
assertEquals(expected, actual)：expected equal actual pass，否则fail
assertSame(expected, actual)：expected == actual pass，否则fail

</code></pre>

<h4 id="instrumented-unit-test">设备单元测试Instrumented Unit Test</h4>
<p>这种测试方法需要连接安卓设备或者模拟器，可以调用android中api(如设备信息，上下文等)  ，使用方法是给类加上注解@RunWith(AndroidJunit4.class)注解作为前缀。  </p>
<pre><code>@RunWith(AndroidJUnit4.class)
public class ExampleInstrumentedTest {
    @Test
    public void useAppContext() throws Exception {
        // Context of the app under test.
        Context appContext = InstrumentationRegistry.getTargetContext();
        assertEquals(&quot;top.qingningshe.test&quot;, appContext.getPackageName());
    }
}
</code></pre>

<p>相对于Local Unit Test 多了访问设备信息和测试筛选  </p>
<h5 id="_2">访问设备信息</h5>
<pre><code>可以使用instrumentationRegisty类访问与测试运行相关的信息，包括instrumentation对象，目标应用context对象，测试应用context对象。
</code></pre>
<h5 id="_3">测试筛选</h5>
<pre><code>* @RequiresDevice:指定测试仅在物理设备而不在模拟器上运行。
* @SdkSupress:禁止在低于给定级别的Android API 上运行测试，如：@SDKSupress(minSdkVersion=18)  
* @SmallTest、@MediumTest和@LargeTest：指定测试的运行时长以及运行频率。
</code></pre>
<h3 id="monkey">压力测试Monkey</h3>
<p>Monkey是Android中的一个命令行工具，可以运行在模拟器里或实际设备中。它向系统发送伪随机的用户事件流(如按键输入、触摸屏输入、手势输入等)，实现对正在开发的应用程序进行压力测试。Monkey测试是一种为了测试软件的稳定性、健壮性的快速有效的方法。</p>
<p>#### mokey的特点<br />
<code>测试的对象仅为应用程序包，有一定的局限性。
Monky测试使用的事件流数据流是随机的，不能进行自定义。
可对MonkeyTest的对象，事件数量，类型，频率等进行设置。</code> <br />
 #### monkey用法<br />
<code>adb shell monkey [options] &lt;event-count&gt;
  options这个是配置monkey的设置，如指定启动哪个包，不指定将会随机启动所有程序，event-count这个是让monkey发送多少次事件
  例：adb shell monkey -p com.android.test -v 5000  
  向test包发送五千次随机事件</code>   </p>
<p>```
  事件  </p>
<p>```</p>
<h4 id="monkey_1">monkey停止条件</h4>
<pre><code>如果限定了Monkey运行在一个或几个特定的包上，那么它会监测试图转到其它包的操作，并对其进行阻止。
如果应用程序崩溃或接收到任何失控异常，Monkey将停止并报错。
如果应用程序产生了应用程序不响应(ANR)的错误，Monkey将会停止并报错。
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
