<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>屏幕适配 - 小巩的网站</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">小巩的网站</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">介绍</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">音视频 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../AnalysisMp4File/" class="dropdown-item">mp4文件解析</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">JAVA <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../basicDataType/" class="dropdown-item">基础数据类型</a>
</li>
                                    
<li>
    <a href="../algorithm/" class="dropdown-item">算法</a>
</li>
                                    
<li>
    <a href="../garbage/" class="dropdown-item">垃圾回收机制</a>
</li>
                                    
<li>
    <a href="../thread/" class="dropdown-item">线程</a>
</li>
                                    
<li>
    <a href="../threadPool/" class="dropdown-item">线程池</a>
</li>
                                    
<li>
    <a href="../collection/" class="dropdown-item">集合</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">sdk笔记 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../sdk_provider.md" class="dropdown-item">provider方式</a>
</li>
                                    
<li>
    <a href="../sdk/" class="dropdown-item">总结</a>
</li>
                                    
<li>
    <a href="../ipc/" class="dropdown-item">进程间通信sdk</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Android <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../fourcomponent/" class="dropdown-item">四大组件</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">设计模式</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../designpattern/singleInstance/" class="dropdown-item">单例</a>
</li>
            
<li>
    <a href="../designpattern/factory/" class="dropdown-item">工厂</a>
</li>
            
<li>
    <a href="../designpattern/builder/" class="dropdown-item">Builder</a>
</li>
            
<li>
    <a href="../designpattern/observer/" class="dropdown-item">观察者</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">自定义控件</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../customView/customCombinationView/" class="dropdown-item">自定义组合控件</a>
</li>
            
<li>
    <a href="../customView/customView/" class="dropdown-item">自定义View</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">APP架构</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../constructure/mvc/" class="dropdown-item">MVC</a>
</li>
            
<li>
    <a href="../constructure/font_updown.md" class="dropdown-item">MVP</a>
</li>
            
<li>
    <a href="../constructure/font_updown.md" class="dropdown-item">MVvm</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../touchEvent/" class="dropdown-item">事件分发</a>
</li>
                                    
<li>
    <a href="../handler/" class="dropdown-item">Handler原理</a>
</li>
                                    
<li>
    <a href="../sdkversion/" class="dropdown-item">Android版本对应SDK版本</a>
</li>
                                    
<li>
    <a href="../better/" class="dropdown-item">APP整体优化</a>
</li>
                                    
<li>
    <a href="../app_start_process/" class="dropdown-item">APP启动流程</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">屏幕适配</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">一些小的点</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../context/" class="dropdown-item">ConText</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">一些常见功能的思考</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../login.md" class="dropdown-item">登录</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../test/" class="dropdown-item">单元测试Monkey</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Flutter插件 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../whyflutterplugin/" class="dropdown-item">什么是flutter插件及作用</a>
</li>
                                    
<li>
    <a href="../howflutterenvironment/" class="dropdown-item">如何配置flutter环境</a>
</li>
                                    
<li>
    <a href="../flutterplugincoding/" class="dropdown-item">flutter插件开发</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">git <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../git_scenes/" class="dropdown-item">常见场景操作</a>
</li>
                                    
<li>
    <a href="../git_client_steps/" class="dropdown-item">Android端git版本管理</a>
</li>
                                    
<li>
    <a href="../git_commit_log/" class="dropdown-item">commit log</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">故障复盘记录 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../sdkexception/" class="dropdown-item">AndroidSDK故障记录</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../app_start_process/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../context/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            
            
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h4 id="_1">为什么要适配？</h4>
<p>Android系统的开放性导致的屏幕尺寸碎片化，出现同一元素在不同手机上显示不同的问题。试想一下这么一个场景： 为4.3寸屏幕准备的UI设计图，运行在5.0寸的屏幕上，很可能在右侧和下侧存在大量的空白；而5.0寸的UI设计图运行到4.3寸的设备上，很可能显示不下。为了保证用户获得一致的用户体验效果,使得某一元素在Android不同尺寸、不同分辨率的、不同系统的手机上具备相同的显示效果，能够保持界面上的效果一致,我们需要对各种手机屏幕进行适配！</p>
<h4 id="_2">基本概念</h4>
<ol>
<li>
<p>像素（px）：</p>
</li>
<li>
<p>含义：通常所说的像素，就是CCD/CMOS上光电感应元件的数量，一个感光元件经过感光，光电信号转换，A/D转换等步骤以后，在输出的照片上就形成一个点，我们如果把影像放大数倍，会发现这些连续色调其实是由许多色彩相近的小方点所组成，这些小方点就是构成影像的最小单位“像素”（Pixel）。简而言之，像素就是手机屏幕的最小构成单元。</p>
</li>
<li>单位：px（pixel），1px = 1像素点
一般情况下UI设计师的设计图会以px作为统一的计量单位</li>
<li>分辨率：</li>
<li>含义：手机在横向、纵向上的像素点数总和 一般描述成 宽*高 ，即横向像素点个数 * 纵向像素点个数（如1080 x 1920）。</li>
<li>单位：px（pixel），1px = 1像素点</li>
<li>屏幕尺寸（in）：</li>
<li>含义：手机对角线的物理尺寸</li>
<li>单位 英寸（inch），一英寸大约2.54cm 常见的尺寸有4.7寸、5寸、5.5寸、6寸</li>
<li>
<p>屏幕像素密度（dpi）：</p>
</li>
<li>
<p>含义：每英寸的像素点数。
例如每英寸内有160个像素点，则其像素密度为160dpi。</p>
</li>
<li>单位：dpi（dots per inch）</li>
<li>计算公式： 像素密度 = 像素 / 尺寸 （dpi = px / in）
标准屏幕像素密度（mdpi）： 每英寸长度上还有160个像素点（160dpi），即称为标准屏幕像素密度（mdpi）。</li>
</ol>
<table>
<thead>
<tr>
<th>密度类型</th>
<th>代表的分辨率(px)</th>
<th>屏幕像素密度(dpi)</th>
</tr>
</thead>
<tbody>
<tr>
<td>低密度(idpi)</td>
<td>240x320</td>
<td>120</td>
</tr>
<tr>
<td>中密度(mdpi)</td>
<td>320x480</td>
<td>160</td>
</tr>
<tr>
<td>高密度(hdpi)</td>
<td>480x800</td>
<td>240</td>
</tr>
<tr>
<td>超密度(hdpi)</td>
<td>720x1280</td>
<td>320</td>
</tr>
<tr>
<td>超超密度(hdpi)</td>
<td>1080x1920</td>
<td>480</td>
</tr>
</tbody>
</table>
<blockquote>
<p>屏幕尺寸、分辨率、像素密度三者关系</p>
</blockquote>
<p>一部手机的分辨率是宽x高，屏幕大小是以寸为单位，那么三者的关系是：
<img alt="dpipxinch.png" src="https://i.loli.net/2020/11/17/a1ImzQs6lRdjPcO.png" />
5. 密度无关像素（dp）：</p>
<ul>
<li>含义：density-independent pixel，叫dp或dip，与终端上的实际物理像素点无关</li>
<li>单位：dp，可以保证在不同屏幕像素密度的设备上显示相同的效果，是安卓特有的长度单位。
场景例子：假如同样都是画一条长度是屏幕一半的线，如果使用px作为计量单位，那么在480x800分辨率手机上设置应为240px；在320x480的手机上应设置为160px，二者设置就不同了；如果使用dp为单位，在这两种分辨率下，160dp都显示为屏幕一半的长度。</li>
<li>
<p>dp与px的转换：1dp = （dpi / 160 ） * 1px;
<img alt="dptopx.png" src="https://i.loli.net/2020/11/17/pfIAEdYT2RUFgLD.png" /></p>
</li>
<li>
<p>独立比例像素（sp）：</p>
</li>
<li>
<p>含义：scale-independent pixel，叫sp或sip</p>
</li>
<li>
<p>单位：sp，字体大小专用单位
Android开发时用此单位设置文字大小，可根据字体大小首选项进行缩放；
推荐使用12sp、14sp、18sp、22sp作为字体大小，不推荐使用奇数和小数，容易造成精度丢失，12sp以下字体太小。</p>
</li>
<li>
<p>sp 与 dp 的区别：</p>
</li>
</ul>
<p>dp只跟屏幕的像素密度有关；
sp和dp很类似但唯一的区别是，Android系统允许用户自定义文字尺寸大小（小、正常、大、超大等等），当文字尺寸是“正常”时1sp=1dp=0.00625英寸，而当文字尺寸是“大”或“超大”时，1sp&gt;1dp=0.00625英寸。类似我们在windows里调整字体尺寸以后的效果——窗口大小不变，只有文字大小改变。</p>
<h4 id="_3">适配方案</h4>
<blockquote>
<p>将分为布局组件、布局、图片、代码、接口等几方面来谈。</p>
</blockquote>
<h5 id="_4">关于布局组件的适配</h5>
<ol>
<li>使用dp或者sp代替px</li>
<li>使用约束布局/相对布局代替绝对布局</li>
<li>使用wrap_content,match-parent,权重替代具体的尺寸</li>
<li>使用minwidth,minheight,等属性</li>
<li>dimens使用</li>
</ol>
<h5 id="_5">关于布局的适配</h5>
<ol>
<li>使用large限定符</li>
</ol>
<pre><code>同时适配手机和平板/电视，布局名称中使用large限定符，系统回在较大（7英寸或者更大）屏幕上自动选择此布局。
</code></pre>
<ol>
<li>最小宽度限定符  </li>
</ol>
<pre><code>使用Size限定符有一个问题会让很多程序员感到头疼，large到底是指多大呢？很多应用程序都希望能够更自由地为不同屏幕设备加载不同的布局，不管它们是不是被系统认定为”large”。这就是Android为什么在3.2以后引入了”Smallest-width”限定符。 
最小宽度限定符可让您通过指定某个最小宽度（以 dp 为单位）来定位屏幕。例如，标准 7 英寸平板电脑的最小宽度为 600 dp，因此如果您要在此类屏幕上的用户界面中使用双面板（但在较小的屏幕上只显示列表），您可以使用上文中所述的单面板和双面板这两种布局，但您应使用 sw600dp 指明双面板布局仅适用于最小宽度为 600 dp 的屏幕，而不是使用 large 尺寸限定符。
也就是说，对于最小宽度大于等于 600 dp 的设备，系统会选择 layout-sw600dp/main.xml（双面板）布局，否则系统就会选择 layout/main.xml（单面板）布局。
但 Android 版本低于 3.2 的设备不支持此技术，原因是这些设备无法将 sw600dp 识别为尺寸限定符，因此我们仍需使用 large 限定符。这样一来，就会有一个名称为 res/layout-large/main.xml 的文件（与 res/layout-sw600dp/main.xml 一样）。但是没有太大关系，我们将马上学习如何避免此类布局文件出现的重复。

</code></pre>
<p>避免布局文件重复可以使用布局别名
3. 使用屏幕方向限定符
4. </p>
<h5 id="_6">图片适配</h5>
<ol>
<li>logo图标建议按照官方标准准备好图标</li>
</ol>
<table>
<thead>
<tr>
<th>屏幕密度</th>
<th>对应图片大小(px)</th>
<th>图片资源目录</th>
</tr>
</thead>
<tbody>
<tr>
<td>120dip(idpi)</td>
<td>36x36</td>
<td>mipmap-idpi</td>
</tr>
<tr>
<td>160dip(mdpi)</td>
<td>48x48</td>
<td>mipmap或者mipmap-mdpi</td>
</tr>
<tr>
<td>240dip(hdpi)</td>
<td>72x72</td>
<td>mipmap-hdpi</td>
</tr>
<tr>
<td>320dip(xhdpi)</td>
<td>96x96</td>
<td>mipmap-xhdpi</td>
</tr>
<tr>
<td>480dip(xxhdpi)</td>
<td>144x144</td>
<td>mipmap-xxhdpi</td>
</tr>
<tr>
<td>640dip(xxxhdpi)</td>
<td>192x192</td>
<td>mipmap-xxxhdpi</td>
</tr>
</tbody>
</table>
<ol>
<li>普通图片和图标<br />
建议按照官方的密度类型进行切图即可，但一般我们只需xxhdpi或xxxhdpi的切图即可满足我们的需求；</li>
<li>自动拉伸图.9图片类型（按钮）</li>
<li>动画、自定义view、shape</li>
<li>imageView的scaleType适配</li>
</ol>
<pre><code>1. android:scaleType=“center”
保持原图的大小，显示在ImageView的中心。当原图的size大于ImageView的size时，多出来的部分被截掉。
2. android:scaleType=“center_inside”
以原图正常显示为目的，如果原图大小大于ImageView的size，就按照比例缩小原图的宽高，居中显示在ImageView中。如果原图size小于ImageView的size，则不做处理居中显示图片。
3. android:scaleType=“center_crop”
以原图填满ImageView为目的，如果原图size大于ImageView的size，则与center_inside一样，按比例缩小，居中显示在ImageView上。如果原图size小于ImageView的size，则按比例拉升原图的宽和高，填充ImageView居中显示。
4. android:scaleType=“matrix”
不改变原图的大小，从ImageView的左上角开始绘制，超出部分做剪切处理。
5. androd:scaleType=“fit_xy”
把图片按照指定的大小在ImageView中显示，拉伸显示图片，不保持原比例，填满ImageView.
6. android:scaleType=“fit_start”
把原图按照比例放大缩小到ImageView的高度，显示在ImageView的start（前部/上部）。
7. android:sacleType=“fit_center”
把原图按照比例放大缩小到ImageView的高度，显示在ImageView的center（中部/居中显示）。
8. android:scaleType=“fit_end”
把原图按照比例放大缩小到ImageView的高度，显示在ImageVIew的end（后部/尾部/底部）

</code></pre>
<ol>
<li>代码适配  </li>
</ol>
<pre><code>通过api测量手机屏幕宽高度，然后根据需求来设置
</code></pre>
<ol>
<li>接口适配  </li>
</ol>
<pre><code>本地加载图片前判断手机分辨率或者像素密度，向服务器请求对应级别图片
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
